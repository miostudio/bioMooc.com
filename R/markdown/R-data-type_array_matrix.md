# 数组 array

数组可以是多维的，一维就是向量，二维就是矩阵(数据表)，三维是方块(多个数据表)，以此类推。


## (1)创建高维数组

```
例1: 比如保存5年 * 每年12个月，每月的平均噪音(1晚上，2白天)
> z=1:120
> dim(z) = c(5,12,2) #指定维度
> z
, , 1

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
[1,]    1    6   11   16   21   26   31   36   41    46    51    56
[2,]    2    7   12   17   22   27   32   37   42    47    52    57
[3,]    3    8   13   18   23   28   33   38   43    48    53    58
[4,]    4    9   14   19   24   29   34   39   44    49    54    59
[5,]    5   10   15   20   25   30   35   40   45    50    55    60

, , 2

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
[1,]   61   66   71   76   81   86   91   96  101   106   111   116
[2,]   62   67   72   77   82   87   92   97  102   107   112   117
[3,]   63   68   73   78   83   88   93   98  103   108   113   118
[4,]   64   69   74   79   84   89   94   99  104   109   114   119
[5,]   65   70   75   80   85   90   95  100  105   110   115   120

> z[1,3,2] #第1行第3列，第2个表
[1] 71
```


高维数组用的也不多，用到再补。

- https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Arrays-and-matrices















# 矩阵 matrix

矩阵主要用于数值计算，矩阵的乘法用R直接算太慢，很多R包都是写C++扩展实现的。

点到为止，以后再补充。


```
转置 t()
提取对角线元素 diag()
矩阵按行合并 rbind()，按列合并 cbind()

a2=matrix(1:6,2,3);a2
a2*a2 #矩阵的逐元乘积
a2 %*% t(a2) #矩阵的代数乘积(点乘)


m = matrix(1:12, nrow=3); m
apply(m, MARGIN=1, FUN=mean) # 求各行的均值
apply(m, MARGIN=2, FUN=mean) # 求各列的均值
scale(m, center=T, scale=T) #标准化
```




例1: 中心化与标准化

```
#所谓中心化就是将数据减去均值后得到的，比如有一组数据(1,2,3,4,5,6,7)，它的均值是4，中心化后的数据为(-3，-2，-1，0，1，2，3)
#  而标准化则是在中心化后的数据基础上再除以数据的标准差
#  在R语言中可以通过scale函数直接进行数据的中心化和标准化：Scale(x,center,scale)

# 参数解释：x—即需要标准化的数据
#   center—表示是否进行中心化
#   scale—表示是否进行标准化
c1=c(1,2,3,4,5,6,7)
t( scale(c1,scale=F) ) #仅中心化 -3 -2 -1 0 1 2 3
c1.sd=sd(c1) #标准差
scale(c1,scale=F)/c1.sd == scale(c1)


#sweep(X, MARGIN, STATS, FUN) #表示从矩阵X中按MATGIN计算STATS，并从X中除去(sweep out).
#减去中位数:
m
#     [,1] [,2] [,3] [,4]
#[1,]    1    4    7   10
#[2,]    2    5    8   11
#[3,]    3    6    9   12

row.med = apply(m, MARGIN=1, FUN=median); row.med
sweep(m, MARGIN=1, STATS=row.med, FUN='-') #
sweep(m, MARGIN=1, STATS=1:3, FUN='+') #按行分别加上1 2 3
#     [,1] [,2] [,3] [,4]
#[1,]    2    5    8   11
#[2,]    4    7   10   13
#[3,]    6    9   12   15
```














# 参考资料

- https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Arrays-and-matrices



